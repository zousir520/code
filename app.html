<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="%sveltekit.assets%/favicon.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<!-- Preload critical fonts to prevent FOUT -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Recursive:wght@700&display=swap" as="style" />

		<!-- Critical CSS to prevent layout shift -->
		<style>
			/* Prevent FOUC (Flash of Unstyled Content) */
			html, body {
				background-color: #f9fafb;
				color: #111827;
				margin: 0;
				padding: 0;
				min-height: 100vh;
			}

			/* Dark mode styles */
			html.dark, html.dark body {
				background-color: #374151;
				color: #f9fafb;
			}

			/* Prevent font flash */
			body {
				font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			}

			/* Hide content until styles are loaded */
			.app-loading {
				opacity: 0;
				transition: opacity 0.2s ease-in-out;
			}

			.app-loaded {
				opacity: 1;
			}
		</style>

		<!-- Microsoft Clarity https://clarity.microsoft.com/ -->
		<script type="text/javascript">
			(function(c,l,a,r,i,t,y){
				c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
				t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
				y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
			})(window, document, "clarity", "script", "sc5xn1orcu");
		</script>

		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover" class="app-loading dark">
		<div style="display: contents">%sveltekit.body%</div>

		<!-- Inline script to prevent FOUC -->
		<script>
			// Immediately apply dark theme and remove loading state
			document.documentElement.classList.add('dark');

			// Remove loading state after a short delay to ensure styles are applied
			setTimeout(() => {
				document.body.classList.add('app-loaded');
				document.body.classList.remove('app-loading');
			}, 50);
		</script>
	</body>
</html>
